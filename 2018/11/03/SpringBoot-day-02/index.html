<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#333333">
    <meta name="msapplication-TileColor" content="#333333">
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo, liuzhuo, Cakki, gakki">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#333333">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="解忧杂货店" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>SpringBoot_day_02 | 解忧杂货店 - 爱生活爱解忧</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #333333;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">解忧杂货店</a></h1>
        <h2 class="subtitle">爱生活爱解忧</h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">首页</a></li>
        
        <li role="menuitem"><a href="/archives/">归档</a></li>
        
        <li role="menuitem"><a href="/categories/">分类</a></li>
        
        <li role="menuitem"><a href="/tags/">标签</a></li>
        
        <li role="menuitem"><a href="/about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card animate" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://liuzhuo19940206.github.io/2018/11/03/SpringBoot-day-02/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="刘卓">
       <meta itemprop="description" content="hello,every body!">
       <meta itemprop="image" content="/images/avatar.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="解忧杂货店">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">SpringBoot_day_02</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2018-11-03T10:33:31+08:00">2018-11-03 10:33:31</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SpringBoot/" itemprop="url" rel="index"><span itemprop="name">SpringBoot</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SpringBoot/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>Springboot的配置文件<br><a id="more"></a></p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>SpringBoot使用一个全局的配置文件，配置文件名是<strong>固定的</strong>；</p>
<ul>
<li>application.properties</li>
<li>application.yml</li>
</ul>
<p>配置文件的作用：修改SpringBoot自动配置的默认值；SpringBoot在底层都给我们自动配置好；</p>
<p>xxx.properties文件，我们见的比较多，比较熟悉。</p>
<p>这里讲解yml文件。</p>
<p>YAML（YAML Ain’t Markup Language）<br>YAML A Markup Language：是一个标记语言<br>YAML isn’t Markup Language：不是一个标记语言；  </p>
<p>标记语言：<br>以前的配置文件；大多都使用的是 xxxx.xml文件；<br>YAML：以数据为中心，比json、xml等更适合做配置文件； </p>
<p>YAML：配置例子<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined">server:<br>  port: 8081<br></code></pre></td></tr></table></figure></p>
<p>XML：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">&lt;server&gt;<br>   &lt;port&gt;8081&lt;/port&gt;    <br>&lt;/server&gt;<br></code></pre></td></tr></table></figure></p>
<hr>
<p>1）创建新的Springboot项目，添加web模块即可：<br><img src="/images/QQ截图20181103104435.png"></p>
<p>2）在resources下，创建application.yml文件<br><img src="/images/QQ截图20181103104633.png"></p>
<p>3）启动项目<br><img src="/images/QQ截图20181103104821.png"></p>
<p>项目的端口号，修改成为8081.</p>
<h3 id="YAML语法："><a href="#YAML语法：" class="headerlink" title="YAML语法："></a>YAML语法：</h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><p>k:(空格)v：表示一对键值对（<strong>空格必须有</strong>）；</p>
<p>以<strong>空格的缩进</strong>来控制层级关系；只要是左对齐的一列数据，都是同一个层级的</p>
<p>例子：<br><img src="/images/QQ截图20181103105623.png"></p>
<p>注意：属性和值也是大小写敏感。</p>
<h4 id="值的写法"><a href="#值的写法" class="headerlink" title="值的写法"></a>值的写法</h4><h5 id="字面量：普通的值（数字，字符串，布尔）"><a href="#字面量：普通的值（数字，字符串，布尔）" class="headerlink" title="字面量：普通的值（数字，字符串，布尔）"></a>字面量：普通的值（数字，字符串，布尔）</h5><p>k: v：字面量直接来写；</p>
<p>字符串默认不用加上单引号或者双引号；</p>
<p>“”：双引号；不会转义字符串里面的特殊字符；特殊字符会作为本身想表示的意思</p>
<p>name: “zhangsan \n lisi”：输出；zhangsan 换行 lisi</p>
<p>‘’：单引号；会转义特殊字符，特殊字符最终只是一个普通的字符串数据</p>
<p>name: ‘zhangsan \n lisi’：输出；zhangsan \n lisi</p>
<h5 id="对象、Map（属性和值）（键值对）："><a href="#对象、Map（属性和值）（键值对）：" class="headerlink" title="对象、Map（属性和值）（键值对）："></a>对象、Map（属性和值）（键值对）：</h5><p>k: v：在下一行来写对象的属性和值的关系；注意缩进</p>
<p>对象还是k: v的方式<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">friends:<br>	lastName: zhangsan        <br>	age: 20<br></code></pre></td></tr></table></figure></p>
<p>行内写法：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">friends: &#123;lastName: zhangsan,age: 18&#125;<br></code></pre></td></tr></table></figure></p>
<h5 id="数组（List、Set）："><a href="#数组（List、Set）：" class="headerlink" title="数组（List、Set）："></a>数组（List、Set）：</h5><p>用- 值表示数组中的一个元素<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs undefined">pets:<br> ‐ cat<br> ‐ dog<br> ‐ pig<br></code></pre></td></tr></table></figure></p>
<p>行内写法:<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">pets: [cat,dog,pig]<br></code></pre></td></tr></table></figure></p>
<h3 id="配置文件值注入"><a href="#配置文件值注入" class="headerlink" title="配置文件值注入"></a>配置文件值注入</h3><h4 id="使用-ConfigurationProperties注解"><a href="#使用-ConfigurationProperties注解" class="headerlink" title="使用@ConfigurationProperties注解"></a>使用@ConfigurationProperties注解</h4><p>1) 在根包下，创建bean包，并创建Person和Dog类：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs undefined">public class Person &#123;<br><br>    private String lastName;<br>    private Integer age;<br>    private Boolean boss;<br>    private Date birth;<br>    private Map&lt;String, Object&gt; maps;<br>    private List&lt;Object&gt; lists;<br>    private Dog dog;<br><br>   ····<br>&#125;<br></code></pre></td></tr></table></figure></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">public class Dog &#123;<br><br>    private String name;<br>    private Integer age;<br><br>    ····<br>&#125;<br></code></pre></td></tr></table></figure>
<p>其中省略了，get、set、tostring的方法。</p>
<p>2）给application.yml文件赋值：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs undefined">person:<br>  lastName: zhangSan<br>  age: 18<br>  boss: true<br>  birth: 2018/11/11<br>  maps: &#123;k1: v1,k2: v2&#125;<br>  lists:<br>    - list1<br>    - list2<br>  dog:<br>    name: 小狗<br>    age: 2<br></code></pre></td></tr></table></figure></p>
<p>3) 给Person类添加@ConfigurationProperties注解<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs undefined">/**<br> * 描述:<br> *<br> * @ConfigurationProperties: 配置文件的属性映射<br> * prefix：前缀。<br> */<br>@ConfigurationProperties(prefix = &quot;person&quot;)<br>public class Person &#123;<br></code></pre></td></tr></table></figure></p>
<p>4) 测试：<br>在test包下，有一个测试类：<br>SpringBoot02ConfigApplicationTests</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@RunWith(SpringRunner.class)<br>@SpringBootTest<br>public class SpringBoot02ConfigApplicationTests<br></code></pre></td></tr></table></figure>
<p>@RunWith(SpringRunner.class):使用Spring的测试驱动<br>@SpringBootTest：使用Springboot的测试</p>
<p>不再使用Junit测试，Spring的测试驱动，更加方便，可以使用自动注入什么的。</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@RunWith(SpringRunner.class)<br>@SpringBootTest<br>public class SpringBoot02ConfigApplicationTests &#123;<br><br>    @Autowired<br>    private Person person;<br><br>    @Test<br>    public void contextLoads() &#123;<br>        System.out.println(person);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>这里：<code>private Person person;</code> 会报错，因为我们的Person类没有注入到容器中，所以，我们还需要在Person类上面，加上@Component注解。<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@Component<br>@ConfigurationProperties(prefix = &quot;person&quot;)<br>public class Person<br></code></pre></td></tr></table></figure></p>
<p>运行测试：<br><img src="/images/QQ截图20181103114614.png"><br><img src="/images/QQ截图20181103114704.png"></p>
<p>在控制台，看到到了Person类的属性注入成功了。</p>
<p><strong>PS：想要在yml文件中书写时，有提示，我们可以加入配置文件处理器依赖：</strong><br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs undefined">&lt;!--配置文件处理器，会给出提示--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;<br>    &lt;optional&gt;true&lt;/optional&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></p>
<p><img src="/images/QQ截图20181103115009.png"></p>
<p>在yml配置文件中，person属性下：Alt+/ 会出Person类中还没有配置的属性。</p>
<p><strong>使用提示出现的属性，比如lastName，会是last-name的样子，都是一样的。-n 就相当于大写的N。</strong></p>
<hr>
<p>接下来，使用properties文件配置Person类：</p>
<p>将yml文件中的Person配置注释掉</p>
<p>在properties文件中：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">#idea中的properties文件是UTF-8的编码，而我们需要转换成ASCII编码<br>#给person配置属性值<br>person.last-name=张三<br>person.age=20<br>person.boss=false<br>person.birth=2018/11/03<br>person.maps.k1=v1<br>person.maps.k2=v2<br>person.lists=a,b,c<br>person.dog.name=dog<br>person.dog.age=2<br></code></pre></td></tr></table></figure></p>
<p>运行测试：<br><img src="/images/QQ截图20181103120508.png"><br>此时出现了中文乱码的现象。</p>
<p>这是因为idea默认是使用utf-8的编码，不会转义成ascii。</p>
<p>打开idea的settings：<br><img src="/images/QQ截图20181103120858.png"></p>
<p>再次运行测试：<br><img src="/images/QQ截图20181103120952.png"></p>
<hr>
<h4 id="使用-Value注解"><a href="#使用-Value注解" class="headerlink" title="使用@Value注解"></a>使用@Value注解</h4><p>除了使用@ConfigurationProperties注解来给属性赋值，我们还知道可以还是要Spring的@Value注解。</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@Component<br>public class Person &#123;<br>    /**<br>     * &lt;bean class=&quot;Person&quot;&gt;<br>     *      &lt;property name=&quot;lastName&quot; value=&quot;字面量/$&#123;key&#125;从环境变量、配置文件中获取值/#&#123;SpEL&#125;&quot;&gt;&lt;/property&gt;<br>     * &lt;bean/&gt;<br>     */<br>    @Value(&quot;$&#123;person.last‐name&#125;&quot;)<br>    private String lastName;<br>    @Value(&quot;#&#123;11*2&#125;&quot;)<br>    private Integer age;<br>    @Value(&quot;true&quot;)<br>    private Boolean boss;<br>    private Date birth;<br>    private Map&lt;String,Object&gt; maps;<br>    private List&lt;Object&gt; lists;<br>    private Dog dog;<br></code></pre></td></tr></table></figure>
<p><strong>@Value获取值 和 @ConfigurationProperties获取值比较</strong></p>
<p><img src="/images/QQ截图20181103122845.png"></p>
<p>这里的松散绑定的意思是，lastName，last-name,last_name都可以在@ConfigurationProperties中使用，但是在@Value中，必须一模一样，比如：</p>
<p>在Person类中：<br>@Value(“${person.last-name}”)</p>
<p>在properties配置文件中，必须是：<br>person.last-name=张三</p>
<p>JSR303数据校验的意思是：<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@Component<br>@ConfigurationProperties(prefix = &quot;person&quot;)<br>@Validated<br>public class Person &#123;<br><br>    @Email<br>    private String lastName;<br></code></pre></td></tr></table></figure></p>
<p>在Person类上，添加@Validated注解，开启数据校验的功能，然后在Person的属性上面，添加@Email、等其他注解，就可以提供数据校验的功能。</p>
<p>复杂类型封装的意思是：<br>比如：<br>使用@ConfigurationProperties(prefix = “person”)后，map类型的数据：<br>在配置文件中：maps: {k1: v1,k2: v2} 或者 person.maps.k1=v1，person.maps.k2=v2</p>
<p>然后自动就绑定上了，但是使用@Value注解，就不行。</p>
<p>@Value注入复杂的属性值：</p>
<p>1）使用util标签<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@Component<br>public class Properties &#123;<br> <br>	@Value(&quot;#&#123;testPro&#125;&quot;)<br>	private Properties pros;<br> <br>	@Value(&quot;#&#123;testList&#125;&quot;)<br>	private List&lt;String&gt; myList;<br> <br>	@Value(&quot;#&#123;testMap&#125;&quot;)<br>	private Map&lt;Integer, String&gt; myMap;<br></code></pre></td></tr></table></figure></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs undefined">&lt;!-- applicationContext.xml --&gt;	<br>&lt;!-- 扫描测试属性包中的类，要注入属性类需要被Spring管理 --&gt;<br>&lt;context:component-scan base-package=&quot;com.xy.test2&quot; /&gt;<br> <br>&lt;!-- properties --&gt;<br>&lt;util:properties id=&quot;testPro&quot; location=&quot;classpath:info/info2.properties&quot; /&gt;<br> <br>&lt;!-- list --&gt;<br>&lt;util:list id=&quot;testList&quot; list-class=&quot;java.util.ArrayList&quot;&gt;<br>	&lt;value&gt;first&lt;/value&gt;<br>	&lt;value&gt;second&lt;/value&gt;<br>	&lt;value&gt;third&lt;/value&gt;<br>&lt;/util:list&gt;<br> <br>&lt;!-- map --&gt;<br>&lt;util:map id=&quot;testMap&quot; map-class=&quot;java.util.HashMap&quot;&gt;<br>	&lt;entry key=&quot;1&quot; value=&quot;first&quot; /&gt;<br>	&lt;entry key=&quot;2&quot; value=&quot;second&quot; /&gt;<br>	&lt;entry key=&quot;3&quot; value=&quot;third&quot; /&gt;<br>&lt;/util:map&gt;<br></code></pre></td></tr></table></figure>
<p>2) 直接使用xml的形式来注入复杂的数据类型：</p>
<p>下边的一个java类包含了所有Map、Set、List、数组、属性集合等这些容器，主要用于演示Spring的注入配置；<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><br>package com.lc.collection;<br> <br>import java.util.List;<br>import java.util.Map;<br>import java.util.Properties;<br>import java.util.Set;<br> <br>public class Department &#123;<br> <br>	private String name;<br>	private String [] empName;//数组<br>	private List&lt;Employee&gt; empList;//list集合<br>	private Set&lt;Employee&gt; empsets;//set集合<br>	private Map&lt;String,Employee&gt; empMaps;//map集合<br>	private Properties pp;//Properties的使用<br> <br>	<br>	public Set&lt;Employee&gt; getEmpsets() &#123;<br>		return empsets;<br>	&#125;<br>	public void setEmpsets(Set&lt;Employee&gt; empsets) &#123;<br>		this.empsets = empsets;<br>	&#125;<br>	public String[] getEmpName() &#123;<br>		return empName;<br>	&#125;<br>	public void setEmpName(String[] empName) &#123;<br>		this.empName = empName;<br>	&#125;<br>	public String getName() &#123;<br>		return name;<br>	&#125;<br>	public void setName(String name) &#123;<br>		this.name = name;<br>	&#125;<br>	public List&lt;Employee&gt; getEmpList() &#123;<br>		return empList;<br>	&#125;<br>	public void setEmpList(List&lt;Employee&gt; empList) &#123;<br>		this.empList = empList;<br>	&#125;<br>	public Map&lt;String, Employee&gt; getEmpMaps() &#123;<br>		return empMaps;<br>	&#125;<br>	public void setEmpMaps(Map&lt;String, Employee&gt; empMaps) &#123;<br>		this.empMaps = empMaps;<br>	&#125;<br>	public Properties getPp() &#123;<br>		return pp;<br>	&#125;<br>	public void setPp(Properties pp) &#123;<br>		this.pp = pp;<br>	&#125;<br> <br>&#125;<br></code></pre></td></tr></table></figure></p>
<p>Spring配置文件beans.xml文件:<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs undefined">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br>		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br>		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;<br>		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br>				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd<br>				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;<br> <br>&lt;bean id=&quot;department&quot; class=&quot;com.hsp.collection.Department&quot;&gt;<br>&lt;property name=&quot;name&quot; value=&quot;财务部&quot;/&gt;<br> <br>&lt;!-- 给数组注入值 --&gt;<br>&lt;property name=&quot;empName&quot;&gt;<br>	&lt;list&gt;<br>		&lt;value&gt;小明&lt;/value&gt;<br>		&lt;value&gt;小明小明&lt;/value&gt;<br>		&lt;value&gt;小明小明小明小明&lt;/value&gt;<br>	&lt;/list&gt;<br>&lt;/property&gt;<br> <br>&lt;!-- 给list注入值 list 中可以有相当的对象 --&gt;<br>&lt;property name=&quot;empList&quot;&gt;<br>	&lt;list&gt;<br>		&lt;ref bean=&quot;emp2&quot; /&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>		&lt;ref bean=&quot;emp1&quot;/&gt;<br>	&lt;/list&gt;<br>&lt;/property&gt;<br> <br>&lt;!-- 给set注入值 set不能有相同的对象 --&gt;<br>&lt;property name=&quot;empsets&quot;&gt;<br>	&lt;set&gt;<br>		&lt;ref bean=&quot;emp1&quot; /&gt;<br>		&lt;ref bean=&quot;emp2&quot;/&gt;<br>		&lt;ref bean=&quot;emp2&quot;/&gt;<br>		&lt;ref bean=&quot;emp2&quot;/&gt;<br>		&lt;ref bean=&quot;emp2&quot;/&gt;<br>	&lt;/set&gt;<br>&lt;/property&gt;<br> <br>&lt;!-- 给map注入值 map只有key不一样，就可以装配value --&gt;<br>&lt;property name=&quot;empMaps&quot;&gt;<br>	&lt;map&gt;<br>		&lt;entry key=&quot;11&quot; value-ref=&quot;emp1&quot; /&gt; <br>		&lt;entry key=&quot;22&quot; value-ref=&quot;emp2&quot;/&gt;<br>		&lt;entry key=&quot;22&quot; value-ref=&quot;emp1&quot;/&gt;<br>	&lt;/map&gt;<br>&lt;/property&gt;<br> <br>&lt;!-- 给属性集合配置 --&gt;<br>&lt;property name=&quot;pp&quot;&gt;<br>	&lt;props&gt;<br>		&lt;prop key=&quot;pp1&quot;&gt;abcd&lt;/prop&gt;<br>		&lt;prop key=&quot;pp2&quot;&gt;hello&lt;/prop&gt;<br>	&lt;/props&gt;<br>&lt;/property&gt;<br>&lt;/bean&gt;<br> <br>&lt;bean id=&quot;emp1&quot; class=&quot;com.hsp.collection.Employee&quot;&gt;<br>	&lt;property name=&quot;name&quot; value=&quot;北京&quot;/&gt;<br>	&lt;property name=&quot;id&quot; value=&quot;1&quot;/&gt;<br>&lt;/bean&gt;<br>&lt;bean id=&quot;emp2&quot; class=&quot;com.hsp.collection.Employee&quot;&gt;<br>	&lt;property name=&quot;name&quot; value=&quot;天津&quot;/&gt;<br>	&lt;property name=&quot;id&quot; value=&quot;2&quot;/&gt;<br>&lt;/bean&gt;<br> <br>&lt;/beans&gt;<br></code></pre></td></tr></table></figure></p>
<hr>
<p>配置文件yml还是properties他们都能获取到值；</p>
<p>总结：</p>
<p>如果说，我们只是在某个业务逻辑中需要获取一下配置文件中的某项值，使用@Value；<br>如果说，我们专门编写了一个javaBean来和配置文件进行映射，我们就直接使用@ConfigurationProperties；</p>
<h4 id="PropertySource-amp-ImportResource-amp-Bean"><a href="#PropertySource-amp-ImportResource-amp-Bean" class="headerlink" title="@PropertySource &amp; @ImportResource &amp; @Bean"></a>@PropertySource &amp; @ImportResource &amp; @Bean</h4><p>@ConfigurationProperties默认加载默认的全局配置中的内容。</p>
<p>但是，我们并不想将所有的配置内容都放在全局的配置文件中，则使用@PropertySource注解。</p>
<p>@PropertySource：加载指定的配置文件。</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined">/**<br> * 将配置文件中配置的每一个属性的值，映射到这个组件中<br> * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；<br> *      prefix = &quot;person&quot;：配置文件中哪个下面的所有属性进行一一映射<br> *<br> * 只有这个组件是容器中的组件，才能使用容器提供的@ConfigurationProperties功能；<br> *  @ConfigurationProperties(prefix = &quot;person&quot;)默认从全局配置文件中获取值；<br> *<br> */<br>@PropertySource(value = &#123;&quot;classpath:person.properties&quot;&#125;)<br>@Component<br>@ConfigurationProperties(prefix = &quot;person&quot;)<br>public class Person &#123;<br>   ···<br>｝<br></code></pre></td></tr></table></figure>
<p>@PropertySource(value = {“classpath:person.properties”})：这里指定了在类路径下的person.properties文件中内容映射到本类的属性中。</p>
<p><img src="/images/QQ截图20181103141521.png"></p>
<p><strong>注意：</strong><br>再将默认的全局配置文件中的person属性注释掉，因为全局的配置文件的优先级高于自定义的配置文件的优先级。</p>
<p>运行测试类：<br><img src="/images/QQ截图20181103141730.png"></p>
<p>此时，我们加载的就是自定义person.properties文件中的内容了。</p>
<p>@<strong>ImportResource</strong>：导入Spring的xml配置文件，让配置文件里面的内容生效；</p>
<p>Spring Boot里面没有Spring的xml配置文件，我们自己编写的配置文件，也不能自动识别；<br>想让Spring的配置文件生效，加载进来；@ImportResource标注在一个配置类上。</p>
<p>在resources下，创建beans.xml文件。<br>在service下，创建HellService类</p>
<p><img src="/images/QQ截图20181103142248.png"></p>
<p>修改测试类：<br><img src="/images/QQ截图20181103142451.png"></p>
<p>运行测试方法：<br><img src="/images/QQ截图20181103142633.png"></p>
<p>在Springboot启动类上，加上@ImportResource注解：</p>
<p>因为@SpringBootApplication注解本身也是一个配置类<br><img src="/images/QQ截图20181103142813.png"></p>
<p>再次运行测试方法：<br><img src="/images/QQ截图20181103142947.png"></p>
<p><strong>@Bean</strong></p>
<p>SpringBoot推荐给容器中添加组件的方式；推荐使用全注解的方式</p>
<p>不来编写Spring的xml配置文件。</p>
<p>1）配置类@Configuration——&gt;Spring配置文件</p>
<p>2）使用@Bean给容器中添加组件</p>
<p>在config下，创建一个配置类：<br><img src="/images/QQ截图20181103143527.png"></p>
<p>去掉SpringBootApplication启动类上的@ImportResource注解；</p>
<p>运行测试方法：<br><img src="/images/QQ截图20181103142947.png"></p>
<hr>
<h4 id="配置文件占位符"><a href="#配置文件占位符" class="headerlink" title="配置文件占位符"></a>配置文件占位符</h4><p>1）随机数</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$&#123;random.value&#125;、$&#123;random.int&#125;、$&#123;random.long&#125;<br>$&#123;random.int(10)&#125;、$&#123;random.int[1024,65536]&#125;<br></code></pre></td></tr></table></figure>
<p>比如：<br><img src="/images/QQ截图20181103144510.png"></p>
<p>2）占位符获取之前配置的值，如果没有可以是用:指定默认值</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">person.last‐name=张三$&#123;random.uuid&#125;<br>person.age=$&#123;random.int&#125;<br>person.birth=2017/12/15<br>person.boss=false<br>person.maps.k1=v1<br>person.maps.k2=14<br>person.lists=a,b,c<br>person.dog.name=$&#123;person.hello:hello&#125;_dog<br>person.dog.age=15<br></code></pre></td></tr></table></figure>
<p>这里的person.dog.name使用了${person.hello:hello}_dog，如果${person.hello:hello}之前没有配置，就会使用冒号后面的默认值hello。如果没有写冒号后面的值，即：person.dog.name=${person.hello}_dog。则原样输出。（没有配置${person.hello}的话）。</p>
<h4 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h4><h5 id="多Profile文件"><a href="#多Profile文件" class="headerlink" title="多Profile文件"></a>多Profile文件</h5><p>我们在主配置文件编写的时候，文件名可以是 application-{profile}.properties/yml</p>
<p><strong>默认使用application.properties的配置。</strong></p>
<p>默认的配置文件application.properties：<br><img src="/images/QQ截图20181103150324.png"></p>
<p>创建dev配置文件：<br><img src="/images/QQ截图20181103150535.png"></p>
<p>创建prod配置文件：<br><img src="/images/QQ截图20181103150641.png"></p>
<p>启动SpringBoot应用：<br><img src="/images/QQ截图20181103150737.png"><br><img src="/images/QQ截图20181103150805.png"></p>
<p>可以看出，默认启动，application.properties的配置。端口号：8081</p>
<h5 id="激活指定profile"><a href="#激活指定profile" class="headerlink" title="激活指定profile"></a>激活指定profile</h5><p>1）在默认配置文件中指定 spring.profiles.active=dev<br><img src="/images/QQ截图20181103151018.png"></p>
<p>启动SpringBoot应用：<br><img src="/images/QQ截图20181103151137.png"></p>
<p>端口号：8082.</p>
<p>2）命令行：</p>
<p>java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar  <strong>–spring.profiles.active=dev；</strong></p>
<p>这里是（两个减号）<br><img src="/images/QQ截图20181103151355.png"><br><img src="/images/QQ截图20181103151622.png"><br><img src="/images/QQ截图20181103151704.png"></p>
<p>端口号是：8083</p>
<p><strong>激活的是prod，说明命令行参数的优先级 高于 配置文件的激活的优先级。</strong></p>
<p>3) 虚拟机参数；</p>
<p>-Dspring.profiles.active=dev</p>
<p>（这里是一个减号）<br><img src="/images/QQ截图20181103152038.png"><br><img src="/images/QQ截图20181103152205.png"><br><img src="/images/QQ截图20181103152225.png"></p>
<p>端口号：8082</p>
<p><strong>激活的是dev。说明虚拟机参数的优先级 高于 配置文件的优先级</strong></p>
<hr>
<p>当命令行参数与虚拟机参数同时存在时，以命令行参数为准。</p>
<p>即：命令行的优先级最高。</p>
<p><img src="/images/QQ截图20181103152736.png"><br><img src="/images/QQ截图20181103152756.png"></p>
<p>端口号是：8083</p>
<p>激活的是prod。</p>
<h5 id="yml支持多文档块方式"><a href="#yml支持多文档块方式" class="headerlink" title="yml支持多文档块方式"></a>yml支持多文档块方式</h5><p>在yml文件中，支持多文档块方式，即在一个yml文件中，书写多个文件配置。</p>
<p>使用—隔开。这里是三个减号。</p>
<p>首先，注释掉所有的properties文件和启动的命令行与虚拟机参数。</p>
<p>修改yml文件：</p>
<p><img src="/images/QQ截图20181103153342.png"></p>
<p>启动SpringBoot应用：<br><img src="/images/QQ截图20181103153506.png"></p>
<p>端口号：8084</p>
<p>激活的是dev文件。</p>
<h4 id="配置文件加载位置"><a href="#配置文件加载位置" class="headerlink" title="配置文件加载位置"></a>配置文件加载位置</h4><p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件。</p>
<p>–file:./config/<br>–file:./<br>–classpath:/config/<br>–classpath:/</p>
<p><strong>优先级由高到底，高优先级的配置会覆盖低优先级的配置；</strong></p>
<p>SpringBoot会从这四个位置全部加载主配置文件；<strong>互补配置。</strong></p>
<p>file：代表的是项目的根路径下。</p>
<p>classpath：代表的是resources下。</p>
<p>1）application.properties中：<br><img src="/images/QQ截图20181103155025.png"><br>端口号：8081</p>
<p>启动项目：<br><img src="/images/QQ截图20181103155147.png"><br>端口号启动的也是8081.</p>
<p>2）在resources下创建config包，并创建application.properties文件：<br><img src="/images/QQ截图20181103155312.png"><br>端口号是：8082</p>
<p>启动项目：<br><img src="/images/QQ截图20181103155414.png"><br>启动的端口号：8082</p>
<p>3）在项目的根路径下创建application.properties文件：</p>
<p>即：在spring-boot-02-config右键创建文件。<br><img src="/images/QQ截图20181103155603.png"><br>端口号：8083</p>
<p>启动项目：<br><img src="/images/QQ截图20181103155649.png"><br>启动的端口号：8083</p>
<p>4）在项目的根路径下创建config文件夹，并application.properties文件：<br><img src="/images/QQ截图20181103155800.png"><br>端口号：8084</p>
<p>启动项目：<br><img src="/images/QQ截图20181103155859.png"><br>启动的端口号：8084</p>
<p>印证了SpringBoot加载配置文件的优先级。</p>
<p>当四个位置都有配置文件时，是<strong>互补配置的</strong>。</p>
<p>即当高优先级的配置文件中存在低优先级的配置文件中的内容时会覆盖低优先级中的内容，但是当高优先级的配置文件中，没有低优先级文件中的内容时，会直接加载低优先级文件中的内容。</p>
<p><strong>注意：我们还可以通过spring.config.location来改变默认的配置文件位置</strong></p>
<p>项目打包好以后，我们可以使用命令行参数的形式，启动项目的时候来指定配置文件的新位置；指定配置文件和默<br>认加载的这些配置文件共同起作用形成互补配置；</p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar  –spring.config.location=G:/application.properties</p>
<p>此时：G:/application.properties文件的优先级最高，然后互补配置。</p>
<h4 id="外部配置加载顺序"><a href="#外部配置加载顺序" class="headerlink" title="外部配置加载顺序"></a>外部配置加载顺序</h4><p><strong>SpringBoot也可以从以下位置加载配置； 优先级从高到低；高优先级的配置覆盖低优先级的配置，所有的配置会形成互补配置</strong></p>
<font color="red">1.命令行参数</font><br>所有的配置都可以在命令行上进行指定<br>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar  <strong>–server.port=8087  –server.context-path=/abc</strong><br><br>多个配置用空格分开； –配置项 = 值 (两个减号)<br><br>2.来自java:comp/env的JNDI属性<br><br>3.Java系统属性（System.getProperties()）<br><br>4.操作系统环境变量<br><br>5.RandomValuePropertySource配置的random.*属性值<br><br><strong>由jar包外向jar包内进行寻找；</strong><br><br><strong>优先加载带profile</strong><br><br><font color="red">6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件</font><br><font color="red">7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件</font>

<p><strong>再来加载不带profile</strong></p>
<font color="red">8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件</font><br><font color="red">9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件</font>


<p>10.@Configuration注解类上的@PropertySource<br>11.通过SpringApplication.setDefaultProperties指定的默认属性</p>
<p>所有支持的配置加载来源；</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="noopener">参考官方文档</a></p>
<h4 id="自动配置原理"><a href="#自动配置原理" class="headerlink" title="自动配置原理"></a>自动配置原理</h4><p>配置文件到底能写什么？怎么写？自动配置原理；</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener">配置文件能配置的属性参照</a></p>
<h5 id="自动配置原理："><a href="#自动配置原理：" class="headerlink" title="自动配置原理："></a>自动配置原理：</h5><p>1）、SpringBoot启动的时候加载主配置类，开启了自动配置功能 <strong>@EnableAutoConfiguration</strong></p>
<p>2）、@EnableAutoConfiguration 作用：</p>
<ul>
<li>利用EnableAutoConfigurationImportSelector给容器中导入一些组件？</li>
<li>可以查看selectImports()方法的内容；</li>
<li>List configurations = getCandidateConfigurations(annotationMetadata, attributes);获取候选的配置<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined">SpringFactoriesLoader.loadFactoryNames()<br>扫描所有jar包类路径下  META‐INF/spring.factories<br>把扫描到的这些文件的内容包装成properties对象<br>从properties中获取到EnableAutoConfiguration.class类（类名）对应的值，然后把他们添加在容器<br>中<br></code></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>将类路径下 META-INF/spring.factories 里面配置的所有EnableAutoConfiguration的值加入到了容器中；</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># Auto Configure<br>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\<br>org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\<br>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\<br>org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\<br>org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\<br>org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\<br>org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\<br>org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\<br>org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\<br>org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\<br>org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\<br>org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfi<br>guration,\<br>org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\<br>org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\<br>org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\<br>org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\<br>org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\<br>org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\<br>org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\<br>org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\<br>org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\<br>org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\<br>org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\<br>org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\<br>org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\<br>org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\<br>org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\<br>org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\<br>org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,<br>\<br>org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\<br>org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\<br>org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\<br>org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\<br>org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\<br>org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\<br>org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\<br>org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\<br>org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\<br>org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\<br>org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\<br>org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\<br>org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\<br>org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\<br>org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\<br>org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\<br>org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\<br>org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\<br>org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\<br>org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\<br>org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\<br>org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\<br>org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration<br></code></pre></td></tr></table></figure>
<p>每一个这样的 xxxAutoConfiguration类都是容器中的一个组件，都加入到容器中；用他们来做自动配置；</p>
<p>3）、每一个自动配置类进行自动配置功能；</p>
<p>4）、以HttpEncodingAutoConfiguration（Http编码自动配置）为例解释自动配置原理；<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@Configuration   //表示这是一个配置类，以前编写的配置文件一样，也可以给容器中添加组件<br>@EnableConfigurationProperties(HttpEncodingProperties.class)  //启动指定类的<br>ConfigurationProperties功能；将配置文件中对应的值和HttpEncodingProperties绑定起来；并把<br>HttpEncodingProperties加入到ioc容器中<br>@ConditionalOnWebApplication //Spring底层@Conditional注解（Spring注解版），根据不同的条件，如果<br>满足指定的条件，整个配置类里面的配置就会生效；    判断当前应用是否是web应用，如果是，当前配置类生效<br>@ConditionalOnClass(CharacterEncodingFilter.class)  //判断当前项目有没有这个类<br>CharacterEncodingFilter；SpringMVC中进行乱码解决的过滤器；<br>@ConditionalOnProperty(prefix = &quot;spring.http.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing =<br>true)  //判断配置文件中是否存在某个配置  spring.http.encoding.enabled；如果不存在，判断也是成立的<br>//即使我们配置文件中不配置pring.http.encoding.enabled=true，也是默认生效的；<br>public class HttpEncodingAutoConfiguration &#123;<br> <br>   //他已经和SpringBoot的配置文件映射了  <br>   private final HttpEncodingProperties properties;<br><br>   //只有一个有参构造器的情况下，参数的值就会从容器中拿<br>   public HttpEncodingAutoConfiguration(HttpEncodingProperties properties) &#123;  <br>      this.properties = properties;        <br>   &#125;    <br> <br>@Bean   //给容器中添加一个组件，这个组件的某些值需要从properties中获取<br>@ConditionalOnMissingBean(CharacterEncodingFilter.class) //判断容器没有这个组件？    <br>public CharacterEncodingFilter characterEncodingFilter() &#123;    <br>	CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();        <br>	filter.setEncoding(this.properties.getCharset().name());        <br>	filter.setForceRequestEncoding(this.properties.shouldForce(Type.REQUEST));        <br>	filter.setForceResponseEncoding(this.properties.shouldForce(Type.RESPONSE));        <br>	return filter;        <br>&#125;<br></code></pre></td></tr></table></figure></p>
<p>根据当前不同的条件判断，决定这个配置类是否生效？</p>
<p>一旦这个配置类生效；这个配置类就会给容器中添加各种组件；这些组件的属性是从对应的properties类中获取的，这些类里面的每一个属性又是和配置文件绑定的；</p>
<p>5）、所有在配置文件中能配置的属性都是在xxxxProperties类中封装者；配置文件能配置什么就可以参照某个功能对应的这个属性类</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@ConfigurationProperties(prefix = &quot;spring.http.encoding&quot;)  //从配置文件中获取指定的值和bean的属<br>性进行绑定<br>public class HttpEncodingProperties &#123;<br>   public static final Charset DEFAULT_CHARSET = Charset.forName(&quot;UTF‐8&quot;);<br></code></pre></td></tr></table></figure>
<p><strong>精髓：<br>1）、SpringBoot启动会加载大量的自动配置类<br>2）、我们看我们需要的功能有没有SpringBoot默认写好的自动配置类；<br>3）、我们再来看这个自动配置类中到底配置了哪些组件；（只要我们要用的组件有，我们就不需要再来配置了）<br>4）、给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们就可以在配置文件中指定这<br>些属性的值.</strong></p>
<p>xxxxAutoConfigurartion：自动配置类；给容器中添加组件</p>
<p>xxxxProperties:封装配置文件中相关属性；</p>
<h5 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h5><p>1、@Conditional派生注解（Spring注解版原生的@Conditional作用）</p>
<p>作用：必须是@Conditional指定的条件成立，才给容器中添加组件，配置里面的所有内容才生效；</p>
<p><img src="/images/QQ截图20181103170857.png"></p>
<p><strong>自动配置类必须在一定的条件下才能生效；</strong></p>
<p>我们怎么知道哪些自动配置类生效；</p>
<font color="#EE2C2C">我们可以通过启用 debug=true属性；来让控制台打印自动配置报告，这样我们就可以很方便的知道哪些自动配置类生效；</font>

<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs undefined">=========================<br>AUTO‐CONFIGURATION REPORT<br>=========================<br>Positive matches:（自动配置类启用的）<br>‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐<br>   DispatcherServletAutoConfiguration matched:<br> ‐ @ConditionalOnClass found required class<br>&apos;org.springframework.web.servlet.DispatcherServlet&apos;; @ConditionalOnMissingClass did not find<br>unwanted class (OnClassCondition)<br>      ‐ @ConditionalOnWebApplication (required) found StandardServletEnvironment<br>(OnWebApplicationCondition)<br>       <br>   <br>Negative matches:（没有启动，没有匹配成功的自动配置类）<br>‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐<br>   ActiveMQAutoConfiguration:<br>      Did not match:<br>         ‐ @ConditionalOnClass did not find required classes &apos;javax.jms.ConnectionFactory&apos;,<br>&apos;org.apache.activemq.ActiveMQConnectionFactory&apos; (OnClassCondition)<br>   AopAutoConfiguration:<br>      Did not match:<br>         ‐ @ConditionalOnClass did not find required classes<br>&apos;org.aspectj.lang.annotation.Aspect&apos;, &apos;org.aspectj.lang.reflect.Advice&apos; (OnClassCondition)<br></code></pre></td></tr></table></figure>
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/Spring/" rel="tag"><i class="fas fa-tags"></i>Spring</a>
        
        <a class="post-tag button" href="/tags/SpringBoot/" rel="tag"><i class="fas fa-tags"></i>SpringBoot</a>
        
      </div>
      
    </footer>
  </article>
  
  
<div class="reward" id="reward">
  <p>坚持原创技术分享，您的支持是我前进的动力！</p>
  <button id="reward-button" class="button" disable="enable">打赏</button>
  <div id="qr" class="qr" style="display: none;" aria-hidden="true">
    
    <div id="wechat">
      <img id="wechat_qr" src="/images/WeChatPay.png" alt="微信支付"/>
      <span>微信支付</span>
    </div>
    
    
    <div id="alipay">
      <img id="alipay_qr" src="/images/AliPay.png" alt="支付宝"/>
      <span>支付宝</span>
    </div>
    
    
  </div>
</div>


  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/2018/11/02/SpringBoot-day-01/" rel="next" title="SpringBoot_day_01"><i class="fas fa-angle-left"></i><span class="nav-title">SpringBoot_day_01</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
      <a href="/2018/11/04/SpringBoot-day-03/" rel="prev" title="SpringBoot_day_03"><span class="nav-title">SpringBoot_day_03</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </nav>
  
  
  

<div class="comments" id="comments">
  
  
  <div class="commentjs" id="comment-thread"></div>
  <link rel="stylesheet" href="/css/commentjs.css">
  <script defer type="text/javascript" src="/js/marked.min.js"></script>
  <script defer type="text/javascript" src="/js/timeago.min.js"></script>
  <script defer type="text/javascript" src="/js/highlight.min.js"></script>
  <script defer type="text/javascript" src="/js/commentjs.js"></script>
  <script type="text/javascript">
  $(document).ready(function () {
    getComments({
      "type": "github",
      "user": "liuzhuo19940206",
      "repo": "liuzhuo19940206.github.io",
      "client_id": "d67adf7d637efbea7a69",
      "client_secret": "e3958a48de708ffda0c1ff603f8b48793d43d1ae",
      "no_comment": "这个页面还没有评论，现在就去评论吧！",
      "go_to_comment": "去评论",
      "issue_title": "SpringBoot_day_02",
      "btn_class": "button",
      "comments_target": "#comment-thread"
    });
    marked.setOptions({
      "highlight": function (code, lang) {
        return hljs.highlightAuto(code).value;
      }
    });
    function mark() {
      var markdowns = document.getElementsByClassName("markdown");
      for (var i = 0; i < markdowns.length; ++i){
        if (markdowns[i].innerHTML) {
          markdowns[i].innerHTML = marked(markdowns[i].innerHTML);
        }
      }
    }
    window.addEventListener("DOMContentLoaded", mark, false);
    window.addEventListener("load", mark, false);
  });
  </script>
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"/>
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/avatar.jpg" alt="刘卓">
  
  <h1 class="author-name">刘卓</h1>
  <h2 class="author-description">hello,every body!</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">49</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">24</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">20</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="https://weibo.com/p/1005053310889015/home" target="_blank"><i class="fas fa-rss"></i>Click</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>文章目录</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#配置文件"><span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#YAML语法："><span class="toc-text">YAML语法：</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#基本语法"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#值的写法"><span class="toc-text">值的写法</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#字面量：普通的值（数字，字符串，布尔）"><span class="toc-text">字面量：普通的值（数字，字符串，布尔）</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#对象、Map（属性和值）（键值对）："><span class="toc-text">对象、Map（属性和值）（键值对）：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#数组（List、Set）："><span class="toc-text">数组（List、Set）：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#配置文件值注入"><span class="toc-text">配置文件值注入</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#使用-ConfigurationProperties注解"><span class="toc-text">使用@ConfigurationProperties注解</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#使用-Value注解"><span class="toc-text">使用@Value注解</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#PropertySource-amp-ImportResource-amp-Bean"><span class="toc-text">@PropertySource &amp; @ImportResource &amp; @Bean</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#配置文件占位符"><span class="toc-text">配置文件占位符</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#Profile"><span class="toc-text">Profile</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#多Profile文件"><span class="toc-text">多Profile文件</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#激活指定profile"><span class="toc-text">激活指定profile</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#yml支持多文档块方式"><span class="toc-text">yml支持多文档块方式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#配置文件加载位置"><span class="toc-text">配置文件加载位置</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#外部配置加载顺序"><span class="toc-text">外部配置加载顺序</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#自动配置原理"><span class="toc-text">自动配置原理</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#自动配置原理："><span class="toc-text">自动配置原理：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#细节"><span class="toc-text">细节</span></a></li></ol></li></ol></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接</p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:575920824@qq.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/liuzhuo19940206" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/p/1005053310889015/home" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>友情链接</div>
      <ul>
        
        <li><i class="fas fa-link"></i><a href="http://gakkij.top" target="_blank">Gakki酱</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://dev.tencent.com/user" target="_blank">Coding</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://developer.mozilla.org/" target="_blank">MDN</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #333333;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">刘卓</span><span class="year"><i class="far fa-copyright"></i>2018/10/10 - 2018</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="站点点击量" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="站点用户数" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="页面点击量" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://github.com/liuzhuo19940206/liuzhuo19940206.github.io" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 
        </div>
      </div>
    </div>
  </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  </body>
</html>
