<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#333333">
    <meta name="msapplication-TileColor" content="#333333">
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo, liuzhuo, Cakki, gakki">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#333333">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="解忧杂货店" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Redis的sorted set命令操作 | 解忧杂货店 - 爱生活爱解忧</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #333333;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">解忧杂货店</a></h1>
        <h2 class="subtitle">爱生活爱解忧</h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">首页</a></li>
        
        <li role="menuitem"><a href="/archives/">归档</a></li>
        
        <li role="menuitem"><a href="/categories/">分类</a></li>
        
        <li role="menuitem"><a href="/tags/">标签</a></li>
        
        <li role="menuitem"><a href="/about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card animate" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://liuzhuo19940206.github.io/2018/12/23/Redis的sorted-set命令操作/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="刘卓">
       <meta itemprop="description" content="hello,every body!">
       <meta itemprop="image" content="/images/avatar.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="解忧杂货店">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">Redis的sorted set命令操作</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2018-12-23T13:35:50+08:00">2018-12-23 13:35:50</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/redis/缓存/" itemprop="url" rel="index"><span itemprop="name">缓存</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>redis中的有序集合：sorted set。<br><a id="more"></a></p>
<p>上一篇文章中，我们学习了redis中的集合set的相关操作，今天来学redis中的有序集合。set集合中，我们知道是无序性的，所以redis就出了一个有序的集合，方便用户操作使用。</p>
<p>有序集合的相关命令对比set集合，就是将s变成了z。</p>
<h2 id="zadd-key-NX-XX-CH-INCR-score-member-score-member-…"><a href="#zadd-key-NX-XX-CH-INCR-score-member-score-member-…" class="headerlink" title="zadd key [NX|XX] [CH] [INCR] score member [score member …]"></a>zadd key [NX|XX] [CH] [INCR] score member [score member …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Redis Zadd 命令用于将一个或多个成员元素及其分数值加入到有序集当中。<br><br>如果某个成员已经是有序集的成员，那么更新这个成员的分数值，并通过重新插入这个成员元素，来保证该成员在正确的位置上。<br><br>分数值可以是整数值或双精度浮点数。<br><br>如果有序集合 key 不存在，则创建一个空的有序集并执行 ZADD 操作。<br><br>当 key 存在但不是有序集类型时，返回一个错误。<br><br>XX：仅更新已存在的元素。 永远不要添加元素<br>NX：不要更新现有元素。   始终添加新元素。<br>CH：将返回值从添加的新元素数修改为更改的元素总数（CH是已更改的缩写）。 <br>    更改的元素是添加的新元素和已更新分数的已存在元素。 因此，命令行中指定的元素具有与过去相同的分数，不计算在内。 <br>    注意：通常ZADD的返回值仅计算添加的新元素的数量。<br>INCR：指定此选项时，ZADD的作用类似于ZINCRBY。 在此模式下只能指定一个得分元素对。<br><br>注意： 在 Redis 2.4 版本以前， ZADD 每次只能添加一个元素。<br><br><br>redis 127.0.0.1:6379&gt; ZADD myset 1 &quot;hello&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myset 1 &quot;foo&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myset 2 &quot;world&quot; 3 &quot;bar&quot;<br>(integer) 2<br>redis 127.0.0.1:6379&gt; ZRANGE myzset 0 -1 WITHSCORES<br>1) &quot;hello&quot;<br>2) &quot;1&quot;<br>3) &quot;foo&quot;<br>4) &quot;1&quot;<br>5) &quot;world&quot;<br>6) &quot;2&quot;<br>7) &quot;bar&quot;<br>8) &quot;3&quot;<br></code></pre></td></tr></table></figure>
<h2 id="zcard-key"><a href="#zcard-key" class="headerlink" title="zcard key"></a>zcard key</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Redis Zcard 命令用于计算集合中元素的数量。<br><br>redis 127.0.0.1:6379&gt; ZADD myset 1 &quot;hello&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myset 1 &quot;foo&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myset 2 &quot;world&quot; 3 &quot;bar&quot;<br>(integer) 2<br>redis 127.0.0.1:6379&gt; ZCARD myzset<br>(integer) 4<br></code></pre></td></tr></table></figure>
<h2 id="zcount-key-min-max"><a href="#zcount-key-min-max" class="headerlink" title="zcount key min max"></a>zcount key min max</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined">计算在有序集合中指定区间分数的成员数<br><br>min和max指的是score分数，不是排名！！！<br><br><br>redis 127.0.0.1:6379&gt; ZADD myzset 1 &quot;hello&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myzset 1 &quot;foo&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myzset 2 &quot;world&quot; 3 &quot;bar&quot;<br>(integer) 2<br>redis 127.0.0.1:6379&gt; ZCOUNT myzset 1 3<br>(integer) 4<br></code></pre></td></tr></table></figure>
<h2 id="zincrby-key-increment-member"><a href="#zincrby-key-increment-member" class="headerlink" title="zincrby key increment member"></a>zincrby key increment member</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Redis Zincrby 命令对有序集合中指定成员member的分数加上增量 increment<br><br>可以通过传递一个负数值 increment ，让分数减去相应的值，比如 ZINCRBY key -5 member ，就是让 member 的 score 值减去 5 。<br><br>当 key 不存在，或member不是 key 的成员时， ZINCRBY key increment member 等同于 ZADD key increment member 。<br><br>当 key 不是有序集类型时，返回一个错误。<br><br>分数值可以是整数值或双精度浮点数。<br><br>redis 127.0.0.1:6379&gt; ZADD myzset 1 &quot;hello&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD myzset 1 &quot;foo&quot;<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZINCRBY myzset 2 &quot;hello&quot;<br>(integer) 3<br>redis 127.0.0.1:6379&gt; ZRANGE myzset 0 -1 WITHSCORES<br>1) &quot;foo&quot;<br>2) &quot;2&quot;<br>3) &quot;hello&quot;<br>4) &quot;3&quot;<br></code></pre></td></tr></table></figure>
<h2 id="zrange-key-start-stop-withscores"><a href="#zrange-key-start-stop-withscores" class="headerlink" title="zrange key start stop [withscores]"></a>zrange key start stop [withscores]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Redis Zrange 返回有序集中，指定区间内的成员。<br><br>其中成员的位置按分数值递增(从小到大)来排序。<br><br>具有相同分数值的成员按字典序(lexicographical order )来排列。<br><br>如果你需要成员按<br><br>值递减(从大到小)来排列，请使用 zrevrange 命令。<br><br>下标参数 start 和 stop 都以 0 为底，也就是说，以 0 表示有序集第一个成员，以 1 表示有序集第二个成员，以此类推。<br><br>你也可以使用负数下标，以 -1 表示最后一个成员， -2 表示倒数第二个成员，以此类推。<br><br>[withscores]:选项用来表示是否输出分数score。<br><br>redis 127.0.0.1:6379&gt; ZRANGE salary 0 -1 WITHSCORES             # 显示整个有序集成员<br>1) &quot;jack&quot;<br>2) &quot;3500&quot;<br>3) &quot;tom&quot;<br>4) &quot;5000&quot;<br>5) &quot;boss&quot;<br>6) &quot;10086&quot;<br> <br>redis 127.0.0.1:6379&gt; ZRANGE salary 1 2 WITHSCORES              # 显示有序集下标区间 1 至 2 的成员<br>1) &quot;tom&quot;<br>2) &quot;5000&quot;<br>3) &quot;boss&quot;<br>4) &quot;10086&quot;<br> <br>redis 127.0.0.1:6379&gt; ZRANGE salary 0 200000 WITHSCORES         # 测试 end 下标超出最大下标时的情况<br>1) &quot;jack&quot;<br>2) &quot;3500&quot;<br>3) &quot;tom&quot;<br>4) &quot;5000&quot;<br>5) &quot;boss&quot;<br>6) &quot;10086&quot;<br> <br>redis &gt; ZRANGE salary 200000 3000000 WITHSCORES                  # 测试当给定区间不存在于有序集时的情况<br>(empty list or set)<br></code></pre></td></tr></table></figure>
<h2 id="zrangebylex-key-min-max-LIMIT-offset-count"><a href="#zrangebylex-key-min-max-LIMIT-offset-count" class="headerlink" title="zrangebylex key min max [LIMIT offset count]"></a>zrangebylex key min max [LIMIT offset count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs undefined">ZRANGEBYLEX 返回指定成员区间内的成员，按成员字典正序排序, 分数必须相同。 <br><br>在某些业务场景中,需要对一个字符串数组按名称的字典顺序进行排序时,<br><br>可以使用Redis中SortSet这种数据结构来处理。<br><br>min: 字典中排序位置较小的成员,必须以&quot;[&quot;开头,或者以&quot;(&quot;开头,可使用&quot;-&quot;代替<br>max: 字典中排序位置较大的成员,必须以&quot;[&quot;开头,或者以&quot;(&quot;开头,可使用&quot;+&quot;代替<br>limit: 返回结果是否分页,指令中包含LIMIT后 offset 、count必须输入<br>offset: 返回结果起始位置<br>count: 返回结果数量<br><br>提示:<br>分数必须相同! 如果有序集合中的成员分数有不一致的,返回的结果就不准。<br>成员字符串作为二进制数组的字节数进行比较。<br>默认是以ASCII字符集的顺序进行排列。如果成员字符串包含utf-8这类字符集的内容,就会影响返回结果,所以建议不要使用。<br>默认情况下, “max” 和 “min” 参数前必须加 “[” 符号作为开头。”[” 符号与成员之间不能有空格, 返回成员结果集会包含参数 “min” 和 “max” 。<br>“max” 和 “min” 参数前可以加 “(“ 符号作为开头表示小于, “(“ 符号与成员之间不能有空格。返回成员结果集不会包含 “max” 和 “min” 成员。<br>可以使用 “-“ 和 “+” 表示得分最小值和最大值<br>“min” 和 “max” 不能反, “max” 放前面 “min”放后面会导致返回结果为空<br>与ZRANGEBYLEX获取顺序相反的指令是ZREVRANGEBYLEX。<br>源码中采用C语言中 memcmp() 函数, 从字符的第0位到最后一位进行排序,如果前面部分相同,那么较长的字符串比较短的字符串排序靠后。<br><br>可以使用 “-“ 和 “+” 表示得分最小值和最大值:<br>redis&gt; zadd zset 0 a 0 aa 0 abc 0 apple 0 b 0 c 0 d 0 d1 0 dd 0 dobble 0 z 0 z1<br>(integer) 12<br>redis&gt; ZRANGEBYLEX zset - +<br> 1) &quot;a&quot;<br> 2) &quot;aa&quot;<br> 3) &quot;abc&quot;<br> 4) &quot;apple&quot;<br> 5) &quot;b&quot;<br> 6) &quot;c&quot;<br> 7) &quot;d&quot;<br> 8) &quot;d1&quot;<br> 9) &quot;dd&quot;<br>10) &quot;dobble&quot;<br>11) &quot;z&quot;<br>12) &quot;z1&quot;<br><br>获取分页数据:<br>redis&gt; ZRANGEBYLEX zset - + LIMIT 0 3<br>1) &quot;a&quot;<br>2) &quot;aa&quot;<br>3) &quot;abc&quot;<br>redis&gt; ZRANGEBYLEX zset - + LIMIT 3 3<br>1) &quot;apple&quot;<br>2) &quot;b&quot;<br>3) &quot;c&quot;<br><br>获取成员之间的元素:<br>默认情况下, “max” 和 “min” 参数前必须加 “[” 符号作为开头。<br>“[” 符号与成员之间不能有空格, 返回成员结果集会包含参数 “min” 和 “max” 。<br><br>redis&gt; ZRANGEBYLEX zset [aa [c<br>1) &quot;aa&quot;<br>2) &quot;abc&quot;<br>3) &quot;apple&quot;<br>4) &quot;b&quot;<br>5) &quot;c&quot;<br><br>“min” 和 “max” 不能反, “max” 放前面 “min”放后面会导致返回结果为空<br>redis&gt; ZRANGEBYLEX zset [c [aa<br>(empty list or set)<br><br>使用 “(“ 小于号获取成员之间的元素:<br>“max” 和 “min” 参数前可以加 “(“ 符号作为开头表示小于, “(“ 符号与成员之间不能有空格。<br>返回成员结果集不会包含 “max” 和 “min” 成员。<br><br>redis&gt; ZRANGEBYLEX zset [aa (c<br>1) &quot;aa&quot;<br>2) &quot;abc&quot;<br>3) &quot;apple&quot;<br>4) &quot;b&quot;<br></code></pre></td></tr></table></figure>
<h2 id="zrangebyscore-key-min-max-withscores-limit-offset-count"><a href="#zrangebyscore-key-min-max-withscores-limit-offset-count" class="headerlink" title="zrangebyscore key min max [withscores] [limit offset count]"></a>zrangebyscore key min max [withscores] [limit offset count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回key的有序集合中的分数在min和max之间的所有元素（包括分数等于max或者min的元素）。<br><br>元素被认为是从低分到高分排序的。<br><br>具有相同分数的元素按字典序排列（这个根据redis对有序集合实现的情况而定，并不需要进一步计算）。<br><br>可选的LIMIT参数指定返回结果的数量及区间（类似SQL中SELECT LIMIT offset, count）。注意，如果offset太大，定位offset就可能遍历整个有序集合，这会增加O(N)的复杂度。<br><br>可选参数WITHSCORES会返回元素和其分数，而不只是元素。这个选项在redis2.0之后的版本都可用。<br><br>##区间及无限<br><br>min和max可以是-inf和+inf，这样一来，你就可以在不知道有序集的最低和最高score值的情况下，使用ZRANGEBYSCORE这类命令。<br><br>默认情况下，区间的取值使用闭区间(小于等于或大于等于)，你也可以通过给参数前增加(符号来使用可选的开区间(小于或大于)。<br><br>ZRANGEBYSCORE zset (1 5     返回所有符合条件 1 &lt; score &lt;= 5的成员。<br><br>ZRANGEBYSCORE zset (5 (10   返回所有符合条件 5 &lt; score &lt;  10的成员。<br><br>例子：<br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZRANGEBYSCORE myzset -inf +inf<br>1) &quot;one&quot;<br>2) &quot;two&quot;<br>3) &quot;three&quot;<br>redis&gt; ZRANGEBYSCORE myzset 1 2<br>1) &quot;one&quot;<br>2) &quot;two&quot;<br>redis&gt; ZRANGEBYSCORE myzset (1 2<br>1) &quot;two&quot;<br>redis&gt; ZRANGEBYSCORE myzset (1 (2<br>(empty list or set)<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zrank-key-member"><a href="#zrank-key-member" class="headerlink" title="zrank key member"></a>zrank key member</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回有序集key中成员member的排名。其中有序集成员按score值递增(从小到大)顺序排列。<br><br>排名以0为底，也就是说，score值最小的成员排名为0。<br><br>使用ZREVRANK命令可以获得成员按score值递减(从大到小)排列的排名。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZRANK myzset &quot;three&quot;<br>(integer) 2<br>redis&gt; ZRANK myzset &quot;four&quot;<br>(nil)<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zrem-key-member-member-…"><a href="#zrem-key-member-member-…" class="headerlink" title="zrem key member [member …]"></a>zrem key member [member …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs undefined">删除有序集合key中的member。<br><br>当key存在，但是其不是有序集合类型，就返回一个错误。<br><br>返回的是从有序集合中删除的成员个数，不包括不存在的成员。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZREM myzset &quot;two&quot;<br>(integer) 1<br>redis&gt; ZRANGE myzset 0 -1 WITHSCORES<br>1) &quot;one&quot;<br>2) &quot;1&quot;<br>3) &quot;three&quot;<br>4) &quot;3&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zremrangebylex-key-min-max"><a href="#zremrangebylex-key-min-max" class="headerlink" title="zremrangebylex key min max"></a>zremrangebylex key min max</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs undefined">ZREMRANGEBYLEX 删除名称按字典由低到高排序成员之间所有成员。<br>不要在成员分数不同的有序集合中使用此命令, 因为它是基于分数一致的有序集合设计的,如果使用,会导致删除的结果不正确。<br>待删除的有序集合中,分数最好相同,否则删除结果会不正常。<br><br>min：字典中排序位置较小的成员,必须以&quot;[&quot;开头,或者以&quot;(&quot;开头,可使用&quot;-&quot;代替<br><br>max：字典中排序位置较大的成员,必须以&quot;[&quot;开头,或者以&quot;(&quot;开头,可使用&quot;+&quot;代替<br><br>删除所有元素：<br>可以使用 “-“ 和 “+” 表示最小值和最大值<br><br>redis&gt; zadd zset 0 a 0 aa 0 abc 0 apple 0 b 0 c 0 d 0 d1 0 dd 0 dobble 0 z 0 z1<br>(integer) 12<br>redis&gt; zrangebylex zset - +<br> 1) &quot;a&quot;<br> 2) &quot;aa&quot;<br> 3) &quot;abc&quot;<br> 4) &quot;apple&quot;<br> 5) &quot;b&quot;<br> 6) &quot;c&quot;<br> 7) &quot;d&quot;<br> 8) &quot;d1&quot;<br> 9) &quot;dd&quot;<br>10) &quot;dobble&quot;<br>11) &quot;z&quot;<br>12) &quot;z1&quot;<br>redis&gt; zremrangebylex zset - +<br>(integer) 7<br>redis&gt; zrangebylex zset - +<br>(empty list or set)<br><br>按名称删除某个元素：<br>下面是删除d1这个元素<br><br>redis&gt; zadd zset 0 a 0 aa 0 abc 0 apple 0 b 0 c 0 d 0 d1 0 dd 0 dobble 0 z 0 z1<br>(integer) 12<br>redis&gt; zrangebylex  zset - +<br> 1) &quot;a&quot;<br> 2) &quot;aa&quot;<br> 3) &quot;abc&quot;<br> 4) &quot;apple&quot;<br> 5) &quot;b&quot;<br> 6) &quot;c&quot;<br> 7) &quot;d&quot;<br> 8) &quot;d1&quot;<br> 9) &quot;dd&quot;<br>10) &quot;dobble&quot;<br>11) &quot;z&quot;<br>12) &quot;z1&quot;<br>redis&gt; zremrangebylex zset [d1 (dd<br>(integer) 1<br>redis&gt; zrangebylex  zset - +<br> 1) &quot;a&quot;<br> 2) &quot;aa&quot;<br> 3) &quot;abc&quot;<br> 4) &quot;apple&quot;<br> 5) &quot;b&quot;<br> 6) &quot;c&quot;<br> 7) &quot;d&quot;<br> 8) &quot;dd&quot;<br> 9) &quot;dobble&quot;<br>10) &quot;z&quot;<br>11) &quot;z1&quot;<br><br>按名称删除成员之间的元素,包含”max” 和 “min”成员：<br><br>redis&gt; ZRANGEBYLEX zset - +<br> 1) &quot;a&quot;<br> 2) &quot;aa&quot;<br> 3) &quot;abc&quot;<br> 4) &quot;apple&quot;<br> 5) &quot;b&quot;<br> 6) &quot;c&quot;<br> 7) &quot;d&quot;<br> 8) &quot;dd&quot;<br> 9) &quot;dobble&quot;<br>10) &quot;z&quot;<br>11) &quot;z1&quot;<br>redis&gt; ZREMRANGEBYLEX zset [a [apple<br>(integer) 4<br>redis&gt; ZRANGEBYLEX zset - +<br>1) &quot;b&quot;<br>2) &quot;c&quot;<br>3) &quot;d&quot;<br>4) &quot;dd&quot;<br>5) &quot;dobble&quot;<br>6) &quot;z&quot;<br>7) &quot;z1&quot;<br><br>按名称删除成员之间的元素,不包含”max” 和 “min”成员：<br><br>redis&gt; ZRANGEBYLEX zset - +<br>1) &quot;b&quot;<br>2) &quot;c&quot;<br>3) &quot;d&quot;<br>4) &quot;dd&quot;<br>5) &quot;dobble&quot;<br>6) &quot;z&quot;<br>7) &quot;z1&quot;     <br>redis&gt; ZREMRANGEBYLEX zset (d (dobble<br>(integer) 1<br>redis&gt; ZRANGEBYLEX zset - +<br>1) &quot;b&quot;<br>2) &quot;c&quot;<br>3) &quot;d&quot;<br>4) &quot;dobble&quot;<br>5) &quot;z&quot;<br>6) &quot;z1&quot;<br></code></pre></td></tr></table></figure>
<h2 id="zremrangebyrank-key-start-stop"><a href="#zremrangebyrank-key-start-stop" class="headerlink" title="zremrangebyrank key start stop"></a>zremrangebyrank key start stop</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs undefined">移除有序集key中，指定排名(rank)区间内的所有成员。<br>下标参数start和stop都以0为底，0处是分数最小的那个元素。<br>这些索引也可是负数，表示位移从最高分处开始数。<br>例如，-1是分数最高的元素，-2是分数第二高的，依次类推。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZREMRANGEBYRANK myzset 0 1<br>(integer) 2<br>redis&gt; ZRANGE myzset 0 -1 WITHSCORES<br>1) &quot;three&quot;<br>2) &quot;3&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zremrangebyscore-key-min-max"><a href="#zremrangebyscore-key-min-max" class="headerlink" title="zremrangebyscore key min max"></a>zremrangebyscore key min max</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs undefined">移除有序集key中，所有score值介于min和max之间(包括等于min或max)的成员。 <br>自版本2.1.6开始，score值等于min或max的成员也可以不包括在内，语法请参见ZRANGEBYSCORE命令。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZREMRANGEBYSCORE myzset -inf (2<br>(integer) 1<br>redis&gt; ZRANGE myzset 0 -1 WITHSCORES<br>1) &quot;two&quot;<br>2) &quot;2&quot;<br>3) &quot;three&quot;<br>4) &quot;3&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<hr>
<h2 id="zrevrank-key-member"><a href="#zrevrank-key-member" class="headerlink" title="zrevrank key member"></a>zrevrank key member</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回有序集key中成员member的排名，其中有序集成员按score值从大到小排列。排名以0为底，也就是说，score值最大的成员排名为0。<br><br>使用ZRANK命令可以获得成员按score值递增(从小到大)排列的排名。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZREVRANK myzset &quot;one&quot;<br>(integer) 2<br>redis&gt; ZREVRANK myzset &quot;four&quot;<br>(nil)<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zrevrange-key-start-stop-withscores"><a href="#zrevrange-key-start-stop-withscores" class="headerlink" title="zrevrange key start stop [withscores]"></a>zrevrange key start stop [withscores]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回有序集key中，指定区间内的成员。其中成员的位置按score值递减(从大到小)来排列。<br>具有相同score值的成员按字典序的反序排列。 <br>除了成员按score值递减的次序排列这一点外，ZREVRANGE命令的其他方面和ZRANGE命令一样<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZREVRANGE myzset 0 -1<br>1) &quot;three&quot;<br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>redis&gt; ZREVRANGE myzset 2 3<br>1) &quot;one&quot;<br>redis&gt; ZREVRANGE myzset -2 -1<br>1) &quot;two&quot;<br>2) &quot;one&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zrevrangebylex-key-max-min-limit-offset-count"><a href="#zrevrangebylex-key-max-min-limit-offset-count" class="headerlink" title="zrevrangebylex key max min [limit offset count]"></a>zrevrangebylex key max min [limit offset count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined">zrevrangebylex 返回指定成员区间内的成员，按成员字典倒序排序, 分数必须相同。<br>在某些业务场景中,需要对一个字符串数组按名称的字典顺序进行倒序排列时,可以使用Redis中SortSet这种数据结构来处理。<br></code></pre></td></tr></table></figure>
<h2 id="zrevrangebyscore-key-max-min-withscores-limit-offset-count"><a href="#zrevrangebyscore-key-max-min-withscores-limit-offset-count" class="headerlink" title="zrevrangebyscore key max min [withscores] [limit offset count]"></a>zrevrangebyscore key max min [withscores] [limit offset count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">zrevrangebyscore 返回有序集合中指定分数区间内的成员，分数由高到低排序。<br></code></pre></td></tr></table></figure>
<h2 id="zscore-key-member"><a href="#zscore-key-member" class="headerlink" title="zscore key member"></a>zscore key member</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回有序集key中，成员member的score值。<br><br>如果member元素不是有序集key的成员，或key不存在，返回nil。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZSCORE myzset &quot;one&quot;<br>&quot;1&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zpopmax-key-count"><a href="#zpopmax-key-count" class="headerlink" title="zpopmax key [count]"></a>zpopmax key [count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs undefined">删除并返回有序集合key中的最多count个具有最高得分的成员。<br><br>如未指定，count的默认值为1。指定一个大于有序集合的基数的count不会产生错误。 <br><br>当返回多个元素时候，得分最高的元素将是第一个元素，然后是分数较低的元素。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZPOPMAX myzset<br>1) &quot;3&quot;<br>2) &quot;three&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zpopmin-key-count"><a href="#zpopmin-key-count" class="headerlink" title="zpopmin key [count]"></a>zpopmin key [count]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs undefined">删除并返回有序集合key中的最多count个具有最低得分的成员。<br><br>如未指定，count的默认值为1。指定一个大于有序集合的基数的count不会产生错误。 <br><br>当返回多个元素时候，得分最低的元素将是第一个元素，然后是分数较高的元素。<br><br>redis&gt; ZADD myzset 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD myzset 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZPOPMIN myzset<br>1) &quot;1&quot;<br>2) &quot;one&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="zinterstore-destination-numkeys-key-key-…-weights-weight-aggregate-sum-min-max"><a href="#zinterstore-destination-numkeys-key-key-…-weights-weight-aggregate-sum-min-max" class="headerlink" title="zinterstore destination numkeys key [key …] [weights weight] [aggregate sum|min|max]"></a>zinterstore destination numkeys key [key …] [weights weight] [aggregate sum|min|max]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs undefined">计算给定的numkeys个有序集合的交集，并且把结果放到destination中。 <br><br>在给定要计算的key和其它参数之前，必须先给定key个数(numberkeys)。<br><br>默认情况下，结果中一个元素的分数是有序集合中该元素分数之和，前提是该元素在这些有序集合中都存在。<br><br>因为交集要求其成员必须是给定的每个有序集合中的成员，结果集中的每个元素的分数和输入的有序集合个数相等。<br><br>numkeys: 有序集合key的个数。<br><br>weights：后面加上的是每个key的权重，就是后面的数字乘以每个key的score。<br><br>aggregate：计算方式，默认是sum：求和。min：numkeys个key中score最小的，max：最大的。<br><br>如果destination存在，就把它覆盖。<br><br>127.0.0.1:6379&gt; zadd liu 3 cat 5 dog 7 horse <br>(integer) 3<br>127.0.0.1:6379&gt; zadd deng 4 cat 6 dog 8 horse 1 monkey<br>(integer) 4<br><br>127.0.0.1:6379&gt; zinterstore result 2 liu deng<br>(integer) 3<br><br>127.0.0.1:6379&gt; zrange result 0 -1 withscores<br>1) &quot;cat&quot;<br>2) &quot;7&quot;<br>3) &quot;dog&quot;<br>4) &quot;11&quot;<br>5) &quot;horse&quot;<br>6) &quot;15&quot;<br><br>通过上述的结果看出，默认是求和。<br><br>127.0.0.1:6379&gt; zinterstore result 2 liu deng weights 2 1<br>(integer) 3<br>127.0.0.1:6379&gt; zrange result 0 -1 withscores<br>1) &quot;cat&quot;<br>2) &quot;10&quot;<br>3) &quot;dog&quot;<br>4) &quot;16&quot;<br>5) &quot;horse&quot;<br>6) &quot;22&quot;<br><br>liu的权重就是2了，就是liu中的每个score乘以2，deng乘以1；然后求和。<br><br>127.0.0.1:6379&gt; zinterstore result 2 liu deng aggregate max<br>(integer) 3<br>127.0.0.1:6379&gt; zrange result 0 -1 withscores<br>1) &quot;cat&quot;<br>2) &quot;4&quot;<br>3) &quot;dog&quot;<br>4) &quot;6&quot;<br>5) &quot;horse&quot;<br>6) &quot;8&quot;<br>127.0.0.1:6379&gt; <br><br>改变了计算方式：为max了，就是求keys中每个score分数最大的了，不是求和了。<br></code></pre></td></tr></table></figure>
<h2 id="zunionstore-destination-numkeys-key-key-…-weights-weight-sum-min-max"><a href="#zunionstore-destination-numkeys-key-key-…-weights-weight-sum-min-max" class="headerlink" title="zunionstore destination numkeys key [key …] [weights weight] [sum|min|max]"></a>zunionstore destination numkeys key [key …] [weights weight] [sum|min|max]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs undefined">和zinterstore一样，只是求并集而已。<br><br>redis&gt; ZADD zset1 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD zset1 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD zset2 1 &quot;one&quot;<br>(integer) 1<br>redis&gt; ZADD zset2 2 &quot;two&quot;<br>(integer) 1<br>redis&gt; ZADD zset2 3 &quot;three&quot;<br>(integer) 1<br>redis&gt; ZUNIONSTORE out 2 zset1 zset2 WEIGHTS 2 3<br>(integer) 3<br>redis&gt; ZRANGE out 0 -1 WITHSCORES<br>1) &quot;one&quot;<br>2) &quot;5&quot;<br>3) &quot;three&quot;<br>4) &quot;9&quot;<br>5) &quot;two&quot;<br>6) &quot;10&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/redis/" rel="tag"><i class="fas fa-tags"></i>redis</a>
        
        <a class="post-tag button" href="/tags/缓存/" rel="tag"><i class="fas fa-tags"></i>缓存</a>
        
      </div>
      
    </footer>
  </article>
  
  
<div class="reward" id="reward">
  <p>坚持原创技术分享，您的支持是我前进的动力！</p>
  <button id="reward-button" class="button" disable="enable">打赏</button>
  <div id="qr" class="qr" style="display: none;" aria-hidden="true">
    
    <div id="wechat">
      <img id="wechat_qr" src="/images/WeChatPay.png" alt="微信支付"/>
      <span>微信支付</span>
    </div>
    
    
    <div id="alipay">
      <img id="alipay_qr" src="/images/AliPay.png" alt="支付宝"/>
      <span>支付宝</span>
    </div>
    
    
  </div>
</div>


  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/2018/12/23/Redis的set命令操作/" rel="next" title="Redis的set命令操作"><i class="fas fa-angle-left"></i><span class="nav-title">Redis的set命令操作</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
      <a href="/2018/12/25/Redis的hash命令操作/" rel="prev" title="Redis的hash命令操作"><span class="nav-title">Redis的hash命令操作</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </nav>
  
  
  

<div class="comments" id="comments">
  
  
  <div class="commentjs" id="comment-thread"></div>
  <link rel="stylesheet" href="/css/commentjs.css">
  <script defer type="text/javascript" src="/js/marked.min.js"></script>
  <script defer type="text/javascript" src="/js/timeago.min.js"></script>
  <script defer type="text/javascript" src="/js/highlight.min.js"></script>
  <script defer type="text/javascript" src="/js/commentjs.js"></script>
  <script type="text/javascript">
  $(document).ready(function () {
    getComments({
      "type": "github",
      "user": "liuzhuo19940206",
      "repo": "liuzhuo19940206.github.io",
      "client_id": "d67adf7d637efbea7a69",
      "client_secret": "e3958a48de708ffda0c1ff603f8b48793d43d1ae",
      "no_comment": "这个页面还没有评论，现在就去评论吧！",
      "go_to_comment": "去评论",
      "issue_title": "Redis的sorted set命令操作",
      "btn_class": "button",
      "comments_target": "#comment-thread"
    });
    marked.setOptions({
      "highlight": function (code, lang) {
        return hljs.highlightAuto(code).value;
      }
    });
    function mark() {
      var markdowns = document.getElementsByClassName("markdown");
      for (var i = 0; i < markdowns.length; ++i){
        if (markdowns[i].innerHTML) {
          markdowns[i].innerHTML = marked(markdowns[i].innerHTML);
        }
      }
    }
    window.addEventListener("DOMContentLoaded", mark, false);
    window.addEventListener("load", mark, false);
  });
  </script>
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"/>
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/avatar.jpg" alt="刘卓">
  
  <h1 class="author-name">刘卓</h1>
  <h2 class="author-description">hello,every body!</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">86</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">34</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">30</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="https://weibo.com/p/1005053310889015/home" target="_blank"><i class="fas fa-rss"></i>Click</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>文章目录</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zadd-key-NX-XX-CH-INCR-score-member-score-member-…"><span class="toc-text">zadd key [NX|XX] [CH] [INCR] score member [score member …]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zcard-key"><span class="toc-text">zcard key</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zcount-key-min-max"><span class="toc-text">zcount key min max</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zincrby-key-increment-member"><span class="toc-text">zincrby key increment member</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrange-key-start-stop-withscores"><span class="toc-text">zrange key start stop [withscores]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrangebylex-key-min-max-LIMIT-offset-count"><span class="toc-text">zrangebylex key min max [LIMIT offset count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrangebyscore-key-min-max-withscores-limit-offset-count"><span class="toc-text">zrangebyscore key min max [withscores] [limit offset count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrank-key-member"><span class="toc-text">zrank key member</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrem-key-member-member-…"><span class="toc-text">zrem key member [member …]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zremrangebylex-key-min-max"><span class="toc-text">zremrangebylex key min max</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zremrangebyrank-key-start-stop"><span class="toc-text">zremrangebyrank key start stop</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zremrangebyscore-key-min-max"><span class="toc-text">zremrangebyscore key min max</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrevrank-key-member"><span class="toc-text">zrevrank key member</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrevrange-key-start-stop-withscores"><span class="toc-text">zrevrange key start stop [withscores]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrevrangebylex-key-max-min-limit-offset-count"><span class="toc-text">zrevrangebylex key max min [limit offset count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zrevrangebyscore-key-max-min-withscores-limit-offset-count"><span class="toc-text">zrevrangebyscore key max min [withscores] [limit offset count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zscore-key-member"><span class="toc-text">zscore key member</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zpopmax-key-count"><span class="toc-text">zpopmax key [count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zpopmin-key-count"><span class="toc-text">zpopmin key [count]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zinterstore-destination-numkeys-key-key-…-weights-weight-aggregate-sum-min-max"><span class="toc-text">zinterstore destination numkeys key [key …] [weights weight] [aggregate sum|min|max]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#zunionstore-destination-numkeys-key-key-…-weights-weight-sum-min-max"><span class="toc-text">zunionstore destination numkeys key [key …] [weights weight] [sum|min|max]</span></a></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接</p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:575920824@qq.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/liuzhuo19940206" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/p/1005053310889015/home" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>友情链接</div>
      <ul>
        
        <li><i class="fas fa-link"></i><a href="http://gakkij.top" target="_blank">Gakki酱</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://dev.tencent.com/user" target="_blank">Coding</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://developer.mozilla.org/" target="_blank">MDN</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #333333;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">刘卓</span><span class="year"><i class="far fa-copyright"></i>2018/10/10 - 2019</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="站点点击量" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="站点用户数" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="页面点击量" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://github.com/liuzhuo19940206/liuzhuo19940206.github.io" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 
        </div>
      </div>
    </div>
  </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  </body>
</html>
