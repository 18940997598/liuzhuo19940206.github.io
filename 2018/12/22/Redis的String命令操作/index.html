<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#333333">
    <meta name="msapplication-TileColor" content="#333333">
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo, liuzhuo, Cakki, gakki">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#333333">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="解忧杂货店" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Redis的String命令操作 | 解忧杂货店 - 爱生活爱解忧</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #333333;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">解忧杂货店</a></h1>
        <h2 class="subtitle">爱生活爱解忧</h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">首页</a></li>
        
        <li role="menuitem"><a href="/archives/">归档</a></li>
        
        <li role="menuitem"><a href="/categories/">分类</a></li>
        
        <li role="menuitem"><a href="/tags/">标签</a></li>
        
        <li role="menuitem"><a href="/about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card animate" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://liuzhuo19940206.github.io/2018/12/22/Redis的String命令操作/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="刘卓">
       <meta itemprop="description" content="hello,every body!">
       <meta itemprop="image" content="/images/avatar.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="解忧杂货店">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">Redis的String命令操作</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2018-12-22T14:08:06+08:00">2018-12-22 14:08:06</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/redis/缓存/" itemprop="url" rel="index"><span itemprop="name">缓存</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>今天来学习Redis中的字符串类型操作<br><a id="more"></a></p>
<p>Redis字符串类型的操作</p>
<h2 id="set命令"><a href="#set命令" class="headerlink" title="set命令"></a>set命令</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs undefined">set key value [ex 秒数] / [px 毫秒数]  [nx不存在] /[xx存在]<br><br>如: set a 1 ex 10    , 10秒有效<br>    set a 1 px 9000  , 9秒有效<br><br>注: 如果ex,px同时写 ,以后面的有效期为准<br>如 set a 1 ex 100 px 9000 , 实际有效期是9000毫秒<br><br>nx: 表示key不存在时,执行操作<br>xx: 表示key存在时,执行操作<br><br>=====================================<br><br>127.0.0.1:6379&gt; set a 1 ex 10<br>OK<br>127.0.0.1:6379&gt; ttl a<br>(integer) 8<br>127.0.0.1:6379&gt; ttl a<br>(integer) 7<br>127.0.0.1:6379&gt; ttl a<br>(integer) 6<br>127.0.0.1:6379&gt; ttl a<br>(integer) 1<br>127.0.0.1:6379&gt; ttl a<br>(integer) 0<br>127.0.0.1:6379&gt; ttl a<br>(integer) -2<br><br>不能同时设置 ex 和 px<br>127.0.0.1:6379&gt; set a 1 ex 4 px 9000<br>(error) ERR syntax error<br><br>127.0.0.1:6379&gt; set a 1 px 8000<br>OK<br>127.0.0.1:6379&gt; ttl a<br>(integer) 6<br>127.0.0.1:6379&gt; ttl a<br>(integer) 5<br>127.0.0.1:6379&gt; pttl a<br>(integer) 2176<br>127.0.0.1:6379&gt; pttl a<br>(integer) 960<br>127.0.0.1:6379&gt; pttl a<br>(integer) -2<br><br>=====================================<br><br>127.0.0.1:6379&gt; get a<br>&quot;1&quot;<br>127.0.0.1:6379&gt; set a 2 nx<br>(nil)<br>127.0.0.1:6379&gt; set a 2 xx<br>OK<br>127.0.0.1:6379&gt; get a<br>&quot;2&quot;<br><br>当a存在时，使用nx不会修改a的值，必须使用xx才能修改存在的值。<br><br>=====================================<br><br>set key value [默认是当key不存在时，创建key，key存在时，修改key的value值]<br></code></pre></td></tr></table></figure>
<h2 id="setex-key-seconds-value"><a href="#setex-key-seconds-value" class="headerlink" title="setex key seconds value"></a>setex key seconds value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined">设置key的value的同时，并设置过期的时间，单位是秒<br><br>等价于<br>set mykey value<br>expire mykey seconds<br><br>=====================================<br><br>redis&gt; SETEX mykey 10 &quot;Hello&quot;<br>&quot;OK&quot;<br>redis&gt; TTL mykey<br>(integer) 10<br>redis&gt; GET mykey<br>&quot;Hello&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="psetex-key-milliseconds-value"><a href="#psetex-key-milliseconds-value" class="headerlink" title="psetex key milliseconds value"></a>psetex key milliseconds value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：设置key的同时，设置key的过期时间，单位是毫秒<br><br>redis&gt; PSETEX mykey 1000 &quot;Hello&quot;<br>&quot;OK&quot;<br>redis&gt; PTTL mykey<br>(integer) 999<br>redis&gt; GET mykey<br>&quot;Hello&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="setnx-key-value"><a href="#setnx-key-value" class="headerlink" title="setnx key value"></a>setnx key value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs undefined">返回：<br><br>key不存时，设置成功，返回1<br>key存在时，设置失败，返回0<br><br>redis&gt; SETNX mykey &quot;Hello&quot;<br>(integer) 1<br>redis&gt; SETNX mykey &quot;World&quot;<br>(integer) 0<br>redis&gt; GET mykey<br>&quot;Hello&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="setrange-key-offset-value"><a href="#setrange-key-offset-value" class="headerlink" title="setrange key offset value"></a>setrange key offset value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用:把字符串的offset偏移字节,改成value<br><br>redis 127.0.0.1:6379&gt; set greet hello<br>OK<br>redis 127.0.0.1:6379&gt; setrange greet 2 x<br>(integer) 5<br>redis 127.0.0.1:6379&gt; get greet<br>&quot;hexlo&quot;<br><br>注意: 如果偏移量&gt;字符长度, 该字符自动补0x00<br><br>redis 127.0.0.1:6379&gt; setrange greet 6 !<br>(integer) 7<br>redis 127.0.0.1:6379&gt; get greet<br>&quot;hexlo\x00!&quot;<br></code></pre></td></tr></table></figure>
<h2 id="strlen-key"><a href="#strlen-key" class="headerlink" title="strlen key"></a>strlen key</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：返回key的value值的长度<br><br>redis&gt; SET mykey &quot;Hello world&quot;<br>&quot;OK&quot;<br>redis&gt; STRLEN mykey<br>(integer) 11<br>redis&gt; STRLEN nonexisting<br>(integer) 0<br>redis&gt; <br><br>返回的是value值的长度，从1开始计数，不存在的key，返回0。<br></code></pre></td></tr></table></figure>
<hr>
<h2 id="get-key"><a href="#get-key" class="headerlink" title="get key"></a>get key</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：返回key的value值<br><br>redis&gt; GET nonexisting<br>(nil)<br>redis&gt; SET mykey &quot;Hello&quot;<br>&quot;OK&quot;<br>redis&gt; GET mykey<br>&quot;Hello&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="get-key-start-end"><a href="#get-key-start-end" class="headerlink" title="get key start end"></a>get key start end</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：返回key的起始与结束之间的value值，包括start与end。<br>序号是从0开始计算的！！！<br>末尾的序号是-1.<br><br>redis&gt; SET mykey &quot;This is a string&quot;<br>&quot;OK&quot;<br>redis&gt; GETRANGE mykey 0 3<br>&quot;This&quot;<br>redis&gt; GETRANGE mykey -3 -1<br>&quot;ing&quot;<br>redis&gt; GETRANGE mykey 0 -1<br>&quot;This is a string&quot;<br>redis&gt; GETRANGE mykey 10 100<br>&quot;string&quot;<br>redis&gt;<br><br>注意: <br>1: start &gt;= length , 则返回空字符串<br>2: end &gt;= length , 则截取至字符串的结尾<br>3: 如果start 所处位置在 end 右边, 返回空字符串<br></code></pre></td></tr></table></figure>
<h2 id="getset-key-value"><a href="#getset-key-value" class="headerlink" title="getset key value"></a>getset key value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：返回上次的旧值，并设置新的value值<br><br>redis&gt; SET mykey &quot;Hello&quot;<br>&quot;OK&quot;<br>redis&gt; GETSET mykey &quot;World&quot;<br>&quot;Hello&quot;<br>redis&gt; GET mykey<br>&quot;World&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="append-key-value"><a href="#append-key-value" class="headerlink" title="append key value"></a>append key value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：当key存在时，在value后面追加新的value值。当key不存在时，就相当于set，创建一个新的value<br><br>redis&gt; EXISTS mykey<br>(integer) 0<br>redis&gt; APPEND mykey &quot;Hello&quot;<br>(integer) 5<br>redis&gt; APPEND mykey &quot; World&quot;<br>(integer) 11<br>redis&gt; GET mykey<br>&quot;Hello World&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<hr>
<h2 id="incr-key"><a href="#incr-key" class="headerlink" title="incr key"></a>incr key</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：将key的value值，增加1，前提是key的value值是数字型的字符串<br><br>redis&gt; SET mykey &quot;10&quot;<br>&quot;OK&quot;<br>redis&gt; INCR mykey<br>(integer) 11<br>redis&gt; GET mykey<br>&quot;11&quot;<br>redis&gt;<br><br>如果key不存在，incr key，会将key的value赋值为1.<br>这里fff本身不存在。<br><br>127.0.0.1:6379&gt; incr fff<br>(integer) 1<br>127.0.0.1:6379&gt; get fff<br>&quot;1<br><br>如果key的value值不是数字型的字符串，就会报错！！！<br>127.0.0.1:6379&gt; set lll fdfdf<br>OK<br>127.0.0.1:6379&gt; get lll<br>&quot;fdfdf&quot;<br>127.0.0.1:6379&gt; incr lll<br>(error) ERR value is not an integer or out of range<br>127.0.0.1:6379&gt;<br><br>注意:<br>1:不存在的key当成0,再incr操作<br>2: 范围为64有符号<br></code></pre></td></tr></table></figure>
<h2 id="incrby-key-number"><a href="#incrby-key-number" class="headerlink" title="incrby key number"></a>incrby key number</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs undefined">incr key：是将key的value值加1。<br>incrby key number：是将key的value值加number。<br><br>redis&gt; SET mykey &quot;10&quot;<br>&quot;OK&quot;<br>redis&gt; INCRBY mykey 5<br>(integer) 15<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="incrbyfloat-key-floatnumber"><a href="#incrbyfloat-key-floatnumber" class="headerlink" title="incrbyfloat key floatnumber"></a>incrbyfloat key floatnumber</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs undefined">incrbyfloat key floatnumber:可以加浮点数<br><br>127.0.0.1:6379&gt; set num 5<br>OK<br>127.0.0.1:6379&gt; incr num<br>(integer) 6<br>127.0.0.1:6379&gt; get num<br>&quot;6&quot;<br>127.0.0.1:6379&gt; incrbyfloat num 5.5<br>&quot;11.5&quot;<br>127.0.0.1:6379&gt; get num<br>&quot;11.5&quot;<br><br>=====================================<br><br>redis&gt; SET mykey 10.50<br>&quot;OK&quot;<br>redis&gt; INCRBYFLOAT mykey 0.1<br>&quot;10.6&quot;<br>redis&gt; INCRBYFLOAT mykey -5<br>&quot;5.6&quot;<br>redis&gt; SET mykey 5.0e3<br>&quot;OK&quot;<br>redis&gt; INCRBYFLOAT mykey 2.0e2<br>&quot;5200&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="decr-key"><a href="#decr-key" class="headerlink" title="decr key"></a>decr key</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：将key的value值减一。<br><br>redis&gt; SET mykey &quot;10&quot;<br>&quot;OK&quot;<br>redis&gt; DECR mykey<br>(integer) 9<br>redis&gt; SET mykey &quot;234293482390480948029348230948&quot;<br>&quot;OK&quot;<br>redis&gt; DECR mykey<br>ERR ERR value is not an integer or out of range<br>redis&gt; <br><br>==============================================<br><br>127.0.0.1:6379&gt; exists number<br>(integer) 0<br>127.0.0.1:6379&gt; decr number<br>(integer) -1<br>127.0.0.1:6379&gt; get number<br>&quot;-1&quot;<br>127.0.0.1:6379&gt; <br><br><br>注意：范围是有符号64位。当key不存在时，derc就是先创建key的value值为0，然后减一为-1。<br></code></pre></td></tr></table></figure>
<h2 id="decrby-key-decrement"><a href="#decrby-key-decrement" class="headerlink" title="decrby key decrement"></a>decrby key decrement</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：将key的value值，减decrement。<br><br>redis&gt; SET mykey &quot;10&quot;<br>&quot;OK&quot;<br>redis&gt; DECRBY mykey 3<br>(integer) 7<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="mset-key-value-key-value-…"><a href="#mset-key-value-key-value-…" class="headerlink" title="mset key value [key value …]"></a>mset key value [key value …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：一次性设置多个key、value值<br><br>redis&gt; MSET key1 &quot;Hello&quot; key2 &quot;World&quot;<br>&quot;OK&quot;<br>redis&gt; GET key1<br>&quot;Hello&quot;<br>redis&gt; GET key2<br>&quot;World&quot;<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="mget-key-key-…"><a href="#mget-key-key-…" class="headerlink" title="mget key [key …]"></a>mget key [key …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：一次性获取多个key的value值<br><br>redis&gt; SET key1 &quot;Hello&quot;<br>&quot;OK&quot;<br>redis&gt; SET key2 &quot;World&quot;<br>&quot;OK&quot;<br>redis&gt; MGET key1 key2 nonexisting<br>1) &quot;Hello&quot;<br>2) &quot;World&quot;<br>3) (nil)<br>redis&gt;<br></code></pre></td></tr></table></figure>
<h2 id="msetnx-key-value-key-value-…"><a href="#msetnx-key-value-key-value-…" class="headerlink" title="msetnx key value [key value …]"></a>msetnx key value [key value …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：一次性设置多个不存在的key的value值，如果有一个key存在就返回0，失败！<br><br>127.0.0.1:6379&gt; msetnx a 1 b 2<br>(integer) 1<br>127.0.0.1:6379&gt; mget a b<br>1) &quot;1&quot;<br>2) &quot;2&quot;<br>127.0.0.1:6379&gt; msetnx b 3 c 4<br>(integer) 0<br>127.0.0.1:6379&gt; mget a b c<br>1) &quot;1&quot;<br>2) &quot;2&quot;<br>3) (nil)<br>127.0.0.1:6379&gt;<br></code></pre></td></tr></table></figure>
<hr>
<h2 id="setbit-key-offset-value"><a href="#setbit-key-offset-value" class="headerlink" title="setbit key offset value"></a>setbit key offset value</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用：将key的value中的偏移多少位上的bit值设置为1或0。<br><br>A: 0100 0001  65<br>a：0110 0001  97<br><br>偏移量是从0开始。<br><br>只需要将A的第二位设置为1，就能将大写的A，变成小写的a<br><br>127.0.0.1:6379&gt; set char A<br>OK<br>127.0.0.1:6379&gt; get char<br>&quot;A&quot;<br>127.0.0.1:6379&gt; setbit char 2 1<br>(integer) 0<br>127.0.0.1:6379&gt; get char<br>&quot;a&quot;<br>127.0.0.1:6379&gt;<br><br>注意: <br>1:如果offset过大,则会在中间填充0,<br>2: offset最大大到多少<br>3:offset最大2^32-1,可推出最大的的字符串为512M<br></code></pre></td></tr></table></figure>
<h2 id="getbit-key-offset"><a href="#getbit-key-offset" class="headerlink" title="getbit key offset"></a>getbit key offset</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined">作用:获取值的二进制表示,对应位上的值(从左,从0编号)<br><br>127.0.0.1:6379&gt; set char A<br>OK<br>127.0.0.1:6379&gt; get char<br>&quot;A&quot;<br>127.0.0.1:6379&gt; getbit char 0<br>(integer) 0<br>127.0.0.1:6379&gt; getbit char 1<br>(integer) 1<br>127.0.0.1:6379&gt; getbit char 2<br>(integer) 0<br>127.0.0.1:6379&gt; getbit char 7<br>(integer) 1<br>127.0.0.1:6379&gt;<br></code></pre></td></tr></table></figure>
<h2 id="bitop-operation-destkey-key1-key2-…"><a href="#bitop-operation-destkey-key1-key2-…" class="headerlink" title="bitop operation destkey key1 [key2 …]"></a>bitop operation destkey key1 [key2 …]</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs undefined">对 key1 , key2 ... keyN 作 operation , 并将结果保存到 destkey 上。<br>operation 可以是 AND 、 OR 、 NOT 、 XOR<br><br>redis 127.0.0.1:6379&gt; setbit lower 2 1<br>(integer) 0<br><br>redis 127.0.0.1:6379&gt; set char Q<br>OK<br>redis 127.0.0.1:6379&gt; get char<br>&quot;Q&quot;<br>redis 127.0.0.1:6379&gt; bitop or char char lower<br>(integer) 1<br>redis 127.0.0.1:6379&gt; get char<br>&quot;q&quot;<br><br>注意: 对于NOT操作, key不能多个<br></code></pre></td></tr></table></figure>
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/redis/" rel="tag"><i class="fas fa-tags"></i>redis</a>
        
        <a class="post-tag button" href="/tags/缓存/" rel="tag"><i class="fas fa-tags"></i>缓存</a>
        
      </div>
      
    </footer>
  </article>
  
  
<div class="reward" id="reward">
  <p>坚持原创技术分享，您的支持是我前进的动力！</p>
  <button id="reward-button" class="button" disable="enable">打赏</button>
  <div id="qr" class="qr" style="display: none;" aria-hidden="true">
    
    <div id="wechat">
      <img id="wechat_qr" src="/images/WeChatPay.png" alt="微信支付"/>
      <span>微信支付</span>
    </div>
    
    
    <div id="alipay">
      <img id="alipay_qr" src="/images/AliPay.png" alt="支付宝"/>
      <span>支付宝</span>
    </div>
    
    
  </div>
</div>


  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/2018/12/22/Redis的key通用操作/" rel="next" title="Redis的key通用操作"><i class="fas fa-angle-left"></i><span class="nav-title">Redis的key通用操作</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
      <a href="/2018/12/22/Redis的list命令操作/" rel="prev" title="Redis的list命令操作"><span class="nav-title">Redis的list命令操作</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </nav>
  
  
  

<div class="comments" id="comments">
  
  
  <div class="commentjs" id="comment-thread"></div>
  <link rel="stylesheet" href="/css/commentjs.css">
  <script defer type="text/javascript" src="/js/marked.min.js"></script>
  <script defer type="text/javascript" src="/js/timeago.min.js"></script>
  <script defer type="text/javascript" src="/js/highlight.min.js"></script>
  <script defer type="text/javascript" src="/js/commentjs.js"></script>
  <script type="text/javascript">
  $(document).ready(function () {
    getComments({
      "type": "github",
      "user": "liuzhuo19940206",
      "repo": "liuzhuo19940206.github.io",
      "client_id": "d67adf7d637efbea7a69",
      "client_secret": "e3958a48de708ffda0c1ff603f8b48793d43d1ae",
      "no_comment": "这个页面还没有评论，现在就去评论吧！",
      "go_to_comment": "去评论",
      "issue_title": "Redis的String命令操作",
      "btn_class": "button",
      "comments_target": "#comment-thread"
    });
    marked.setOptions({
      "highlight": function (code, lang) {
        return hljs.highlightAuto(code).value;
      }
    });
    function mark() {
      var markdowns = document.getElementsByClassName("markdown");
      for (var i = 0; i < markdowns.length; ++i){
        if (markdowns[i].innerHTML) {
          markdowns[i].innerHTML = marked(markdowns[i].innerHTML);
        }
      }
    }
    window.addEventListener("DOMContentLoaded", mark, false);
    window.addEventListener("load", mark, false);
  });
  </script>
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"/>
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/avatar.jpg" alt="刘卓">
  
  <h1 class="author-name">刘卓</h1>
  <h2 class="author-description">hello,every body!</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">74</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">30</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">26</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="https://weibo.com/p/1005053310889015/home" target="_blank"><i class="fas fa-rss"></i>Click</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>文章目录</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#set命令"><span class="toc-text">set命令</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#setex-key-seconds-value"><span class="toc-text">setex key seconds value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#psetex-key-milliseconds-value"><span class="toc-text">psetex key milliseconds value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#setnx-key-value"><span class="toc-text">setnx key value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#setrange-key-offset-value"><span class="toc-text">setrange key offset value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#strlen-key"><span class="toc-text">strlen key</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#get-key"><span class="toc-text">get key</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#get-key-start-end"><span class="toc-text">get key start end</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#getset-key-value"><span class="toc-text">getset key value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#append-key-value"><span class="toc-text">append key value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#incr-key"><span class="toc-text">incr key</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#incrby-key-number"><span class="toc-text">incrby key number</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#incrbyfloat-key-floatnumber"><span class="toc-text">incrbyfloat key floatnumber</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#decr-key"><span class="toc-text">decr key</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#decrby-key-decrement"><span class="toc-text">decrby key decrement</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#mset-key-value-key-value-…"><span class="toc-text">mset key value [key value …]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#mget-key-key-…"><span class="toc-text">mget key [key …]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#msetnx-key-value-key-value-…"><span class="toc-text">msetnx key value [key value …]</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#setbit-key-offset-value"><span class="toc-text">setbit key offset value</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#getbit-key-offset"><span class="toc-text">getbit key offset</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#bitop-operation-destkey-key1-key2-…"><span class="toc-text">bitop operation destkey key1 [key2 …]</span></a></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接</p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:575920824@qq.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/liuzhuo19940206" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/p/1005053310889015/home" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>友情链接</div>
      <ul>
        
        <li><i class="fas fa-link"></i><a href="http://gakkij.top" target="_blank">Gakki酱</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://dev.tencent.com/user" target="_blank">Coding</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://developer.mozilla.org/" target="_blank">MDN</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #333333;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">刘卓</span><span class="year"><i class="far fa-copyright"></i>2018/10/10 - 2019</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="站点点击量" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="站点用户数" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="页面点击量" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://github.com/liuzhuo19940206/liuzhuo19940206.github.io" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 
        </div>
      </div>
    </div>
  </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  </body>
</html>
